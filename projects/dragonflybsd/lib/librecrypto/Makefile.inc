.if exists (${.CURDIR}/../../Makefile.inc1)
LIBRESSL_SRC=	${.CURDIR}/../../crypto/libressl
.elif exists (${.CURDIR}/../../../Makefile.inc1)
LIBRESSL_SRC=	${.CURDIR}/../../../crypto/libressl
.else
.error "Cannot find base directory"
.endif
LCRYPTO_SRC=	${LIBRESSL_SRC}/crypto
LSSL_SRC=	${LIBRESSL_SRC}/ssl

CFLAGS+=	-I${LCRYPTO_SRC} -I${LSSL_SRC} -I${.OBJDIR}
CFLAGS+=	-I${LIBRESSL_SRC}/include -I${LIBRESSL_SRC}/include/compat
CFLAGS+=	-DSTDC_HEADERS=1 \
		-DHAVE_SYS_TYPES_H=1 \
		-DHAVE_SYS_STAT_H=1 \
		-DHAVE_STDLIB_H=1 \
		-DHAVE_STRING_H=1 \
		-DHAVE_MEMORY_H=1 \
		-DHAVE_STRINGS_H=1 \
		-DHAVE_INTTYPES_H=1 \
		-DHAVE_STDINT_H=1 \
		-DHAVE_UNISTD_H=1 \
		-DHAVE_DLFCN_H=1 \
		-DHAVE_SYMLINK=1 \
		-DHAVE_ERR_H=1 \
		-DHAVE_READPASSPHRASE_H=1 \
		-DHAVE_ASPRINTF=1 \
		-DHAVE_INET_PTON=1 \
		-DHAVE_MEMMEM=1 \
		-DHAVE_READPASSPHRASE=1 \
		-DHAVE_STRLCAT=1 \
		-DHAVE_STRLCPY=1 \
		-DHAVE_STRCASECMP=1 \
		-DHAVE_STRNDUP=1 \
		-DHAVE_STRNLEN=1 \
		-DHAVE_STRSEP=1 \
		-DHAVE_STRTONUM=1 \
		-DHAVE_TIMEGM=1 \
		-DHAVE_ACCEPT4=1 \
		-DHAVE_POLL=1 \
		-DHAVE_ARC4RANDOM=1 \
		-DHAVE_ARC4RANDOM_BUF=1 \
		-DHAVE_ARC4RANDOM_UNIFORM=1 \
		-DHAVE_VA_COPY=1 \
		-DHAVE___VA_COPY=1 \
		-DHAS_GNU_WARNING_LONG=1 \
		-DSIZEOF_TIME_T=8
CFLAGS+=	-DLIBRESSL_INTERNAL -DOPENSSL_NO_HW_PADLOCK

.if defined(LIB)
_docs=	${LIB}
_skip=	SSLeay_version des_modes
_sec=	3
.else
_docs=	apps
_skip=	config
_sec=	1
.endif
